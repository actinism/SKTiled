<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Layers  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Layers  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">SKTiled Docs</a></p>
        <p class="header-right"><a href="https://github.com/mfessenden/SKTiled"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right"><a href="dash-feed://file%3A%2FUsers%2Fmichael%2Fgit%2FSKTiled%2Fdocsets%2FSKTiled%2Exml"><img src="img/dash.png"/>Install in Dash</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">SKTiled Reference</a>
        <img id="carat" src="img/carat.png" />
        Layers  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Tutorial.html">Tutorial</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="whats-new.html">What&#39;s New</a>
              </li>
              <li class="nav-group-task">
                <a href="getting-started.html">Getting Started</a>
              </li>
              <li class="nav-group-task">
                <a href="scenes.html">Scenes</a>
              </li>
              <li class="nav-group-task">
                <a href="layers.html">Layers</a>
              </li>
              <li class="nav-group-task">
                <a href="tiles.html">Tiles</a>
              </li>
              <li class="nav-group-task">
                <a href="coordinates.html">Coordinates</a>
              </li>
              <li class="nav-group-task">
                <a href="objects.html">Objects</a>
              </li>
              <li class="nav-group-task">
                <a href="properties.html">Properties</a>
              </li>
              <li class="nav-group-task">
                <a href="gameplaykit.html">GameplayKit</a>
              </li>
              <li class="nav-group-task">
                <a href="extending.html">Extending</a>
              </li>
              <li class="nav-group-task">
                <a href="debugging.html">Debugging</a>
              </li>
              <li class="nav-group-task">
                <a href="troubleshooting.html">Troubleshooting</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/SKTiledObject.html">SKTiledObject</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SKTilemapDelegate.html">SKTilemapDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SKTiledSceneDelegate.html">SKTiledSceneDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/SKTiledSceneCameraDelegate.html">SKTiledSceneCameraDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Class Hierarchy.html">Class Hierarchy</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/SKTilemap.html">SKTilemap</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTilemap/TilemapOrientation.html">– TilemapOrientation</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTileset.html">SKTileset</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTiledLayerObject.html">SKTiledLayerObject</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTiledLayerObject.html#/s:7SKTiled0A11LayerObjectC10TileOffsetO">– TileOffset</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTileLayer.html">SKTileLayer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKObjectGroup.html">SKObjectGroup</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKGroupLayer.html">SKGroupLayer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKImageLayer.html">SKImageLayer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTile.html">SKTile</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTile.html#/s:7SKTiled6SKTileC17TileAlignmentHintO">– TileAlignmentHint</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTile.html#/s:7SKTiled6SKTileC12PhysicsShapeO">– PhysicsShape</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTilesetData.html">SKTilesetData</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTileObject.html">SKTileObject</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTileObject.html#/s:7SKTiled12SKTileObjectC13CollisionTypeO">– CollisionType</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTiledScene.html">SKTiledScene</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTiledSceneCamera.html">SKTiledSceneCamera</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SKTiledGraphNode.html">SKTiledGraphNode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other.html">Other</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/DebugDrawOptions.html">DebugDrawOptions</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TextObjectAttributes.html">TextObjectAttributes</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TextObjectAttributes.html#/s:7SKTiled20TextObjectAttributesV0B9AlignmentV">– TextAlignment</a>
              </li>
              <li class="nav-group-task">
                <a href="Other.html#/s:7SKTiled0A18ContentScaleFactorXev">SKTiledContentScaleFactor</a>
              </li>
              <li class="nav-group-task">
                <a href="Other.html#/s:7SKTiled0A12LoggingLevelAA0bC0Ov">SKTiledLoggingLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Other.html#/s:7SKTiled0A23TiledApplicationVersionSSv">SKTiledTiledApplicationVersion</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/AnimationFrame.html">AnimationFrame</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Enums.html">Other Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/CameraZoomClamping.html">CameraZoomClamping</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='working-with-layers' class='heading'>Working with Layers</h1>

<ul>
<li><a href="#creating-new-layers">Creating New Layers</a></li>
<li><a href="#tile-coordinates">Tile Coordinates</a></li>
<li><a href="#group-layers">Group Layers</a></li>
</ul>

<p>Once a map is loaded, you can interact with the layers within. Layers can be queried either by name, layer index, or type. Layers are parsed and indexed in the order they are read in your TMX document, so the bottom-most layer in Tiled will have an index of 0.</p>

<p>There are several ways to query layers from the <a href="Classes/SKTilemap.html"><code>SKTilemap</code></a> object:</p>
<pre class="highlight swift"><code><span class="c1">// access a tile layer with a given name</span>
<span class="k">if</span> <span class="k">let</span> <span class="nv">backgoundLayer</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">getLayers</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"Background"</span><span class="p">)</span><span class="o">.</span><span class="n">first</span> <span class="k">as?</span> <span class="kt">SKTileLayer</span> <span class="p">{</span>
    <span class="n">backgroundLayer</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="c1">// filter tile layers based on name</span>
<span class="k">let</span> <span class="nv">allBackgroundLayers</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">tileLayers</span><span class="p">()</span><span class="o">.</span><span class="n">filter</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">"Background"</span> <span class="p">}</span>

<span class="c1">// return tile layers with the custom `type` property</span>
<span class="k">let</span> <span class="nv">allWallLayers</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">getLayers</span><span class="p">(</span><span class="nv">ofType</span><span class="p">:</span> <span class="s">"walls"</span><span class="p">)</span>
</code></pre>

<p>If you need to access a layer <em>before</em> it is rendered, implement the <a href="Protocols/SKTilemapDelegate.html"><code>SKTilemapDelegate.didAddLayer</code></a> method. See the <a href="scenes.html#sktilemapdelegate-protocol">Setting Up Your Scenes</a> page for more details.</p>
<h2 id='creating-new-layers' class='heading'>Creating New Layers</h2>

<p>Creating new layers for your content is simple:</p>
<pre class="highlight swift"><code><span class="c1">// create a new tile layer</span>
<span class="k">let</span> <span class="nv">newTileLayer</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">newTileLayer</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"Walls"</span><span class="p">)</span>
</code></pre>

<p>The resulting layer is automatically parented to the <a href="Classes/SKTilemap.html"><code>SKTilemap</code></a> node, but you can also parent it to an existing <a href="Classes/SKGroupLayer.html"><code>SKGroupLayer</code></a> group node:</p>
<pre class="highlight swift"><code><span class="c1">// create a new tile layer and parent it to an existing group</span>
<span class="k">let</span> <span class="nv">houseGroup</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">groupLayer</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"HOUSE"</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="o">!</span>
<span class="k">let</span> <span class="nv">newTileLayer</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">newTileLayer</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"Walls"</span><span class="p">,</span> <span class="nv">group</span><span class="p">:</span> <span class="n">houseGroup</span><span class="p">)</span>
</code></pre>
<h2 id='tile-coordinates' class='heading'>Tile Coordinates</h2>

<p>Because all <strong>SKTiled</strong> objects are derived from SpriteKit&rsquo;s default <a href="https://developer.apple.com/reference/spritekit/sknode"><code>SKNode</code></a> type, you can technically parent any object converted from your Tiled scene to any layer type, or have own your sprite objects interacting with <a href="Classes/SKTile.html"><code>SKTile</code></a> sprites.</p>

<p>To aid in positioning your objects, every <a href="Classes/SKTiledLayerObject.html"><code>SKTiledLayerObject</code></a> layer type contains methods for converting tile coordinates to and from the current projection.</p>
<pre class="highlight swift"><code><span class="c1">// add a child node</span>
<span class="n">playerLayer</span><span class="o">.</span><span class="nf">addChild</span><span class="p">(</span><span class="n">player</span><span class="p">)</span>

<span class="c1">// set the player position based on coordinate x &amp; y values</span>
<span class="n">player</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">playerLayer</span><span class="o">.</span><span class="nf">pointForCoordinate</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</code></pre>

<p>It is also possible to provide an offset value in x/y for more precise positioning:</p>
<pre class="highlight swift"><code><span class="n">player</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">playerLayer</span><span class="o">.</span><span class="nf">pointForCoordinate</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="nv">offsetX</span><span class="p">:</span> <span class="mf">8.0</span><span class="p">,</span> <span class="nv">offsetY</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">)</span>
</code></pre>

<p>All <a href="Classes/SKTiledLayerObject.html"><code>SKTiledLayerObject</code></a> objects have convenience methods for adding children with coordinate values &amp; optional offset and zPosition values:</p>
<pre class="highlight swift"><code><span class="n">playerLayer</span><span class="o">.</span><span class="nf">addChild</span><span class="p">(</span><span class="n">player</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="nv">zpos</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">)</span>
</code></pre>

<p>See the <a href="coordinates.html">Coordinates</a> page for more information.</p>
<h2 id='group-layers' class='heading'>Group Layers</h2>

<p><img src="images/group-layers.png" alt="Group Layers"></p>

<p><a href="http://doc.mapeditor.org/manual/layers/#group-layers"><strong>Group layers</strong></a> are a new feature in Tiled v1.0. Group layers are treated as any other layer type; adding or changing properties on a parent group will affect all child layers.</p>
<pre class="highlight swift"><code><span class="c1">// query all of the group layers in the map</span>
<span class="k">let</span> <span class="nv">groupLayers</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="n">groupLayers</span>

<span class="c1">// access a tile layer with a given name</span>
<span class="k">if</span> <span class="k">let</span> <span class="nv">housesGroup</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">getLayers</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"Houses"</span><span class="p">)</span><span class="o">.</span><span class="n">first</span> <span class="k">as?</span> <span class="kt">SKGroupLayer</span> <span class="p">{</span>
    <span class="c1">// add custom prop objects</span>
    <span class="k">for</span> <span class="n">childLayer</span> <span class="k">in</span> <span class="n">housesGroup</span><span class="o">.</span><span class="nf">getLayers</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">lampPost</span> <span class="o">=</span> <span class="kt">LampPostProp</span><span class="p">()</span>
        <span class="n">childLayer</span><span class="o">.</span><span class="nf">addChild</span><span class="p">(</span><span class="n">lampPost</span><span class="p">)</span>
        <span class="n">lampPost</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">childLayer</span><span class="o">.</span><span class="nf">pointForCoordinate</span><span class="p">(</span><span class="n">lampCoord</span><span class="o">.</span><span class="n">defaultCoords</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>With the addition of <strong>group layers</strong>, <a href="Classes/SKTiledLayerObject.html"><code>SKTiledLayerObject</code></a> objects now have two new properties: <a href="Classes/SKTiledLayerObject.html#/s:vC7SKTiled16TiledLayerObject4pathSS"><code>SKTiledLayerObject.path</code></a> &amp; <a href="Classes/SKTiledLayerObject.html#/s:vC7SKTiled16TiledLayerObject7parentsGSaCSo6SKNode_"><code>SKTiledLayerObject.parents</code></a> which represent the layer&rsquo;s location in the Tiled scene hierarchy.</p>

<p><img src="images/layers-path.png" alt="Layers Path"></p>
<pre class="highlight swift"><code><span class="c1">// query layers based on path</span>
<span class="k">let</span> <span class="nv">wallsLayer</span> <span class="o">=</span> <span class="n">tilemap</span><span class="o">.</span><span class="nf">getLayers</span><span class="p">(</span><span class="nv">atPath</span><span class="p">:</span> <span class="s">"WALLS/INNER/inner_walls"</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="o">!</span>

<span class="c1">// get an array of the node &amp; its parents</span>
<span class="nf">print</span><span class="p">(</span><span class="n">wallsLayer</span><span class="o">.</span><span class="n">parents</span><span class="p">)</span>
<span class="c1">// ["inner_walls", "INNER", "WALLS"]</span>
</code></pre>

<p>Next: <a href="tiles.html">Working with Tiles</a> - <a href="Tutorial.html">Index</a></p>

          </section>
        </section>
        <section id="footer">
          <p>© 2016 <a class="link" href="https://github.com/mfessenden" target="_blank" rel="external">Michael Fessenden</a> under <a class="link" href="https://github.com/mfessenden/SKTiled/tree/master/LICENSE" target="_blank" rel="external">open source license</a>.</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.8.3</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
